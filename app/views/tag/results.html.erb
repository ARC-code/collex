<%
    # ------------------------------------------------------------------------
    # Copyright 2009 Applied Research in Patacriticism and the University of Virginia
    #
    # Licensed under the Apache License, Version 2.0 (the "License");
    # you may not use this file except in compliance with the License.
    # You may obtain a copy of the License at
    #
    #    http://www.apache.org/licenses/LICENSE-2.0
  
    # Unless required by applicable law or agreed to in writing, software
    # distributed under the License is distributed on an "AS IS" BASIS,
    # WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
    # See the License for the specific language governing permissions and
    # limitations under the License.
    # ---------------------------------------------------------------------------- -%>
	
<% current_page "Tags" -%>
<div id="search-main">
<% curr_user = session[:user] == nil ? nil : User.find_by_username(session[:user][:username]) -%>

<table class="results_layout"><tr>
	<td class="tag_minor_nav" colspan="2">
	<%= link_to "View full tag cloud", { :action => 'list' }, :class => 'nav_link' %>
	</td>
	</tr>
	<tr>

<td class="tag_results">
<%= render( :partial => 'results/result_count' ) %>    
<% total_link = "<a id='top_of_results'>#{create_total('tag', @total_hits, params[:tag])}</a>" -%>
<%= rounded_h1(total_link) %>
<div class="tag_results standard_box">
<%= render( :partial => 'results/bulkcollect' ) %>
<%= render( :partial => 'results/pagination', :locals => { :page => @page, :num_pages => @num_pages, :destination_hash => { :action => 'results'} }  ) %>

<form name="bulk_collect_form" id="bulk_collect_form" action="/results/bulk_collect" method="post">
	<input type="hidden" name="return" value="/tag/results" />
	<%= render( :partial => 'results/results', :locals => { :user_id => curr_user == nil ? -1 : curr_user.id, :hits => @results } ) %>
</form>

<%= render( :partial => 'results/pagination', :locals => { :page => @page, :num_pages => @num_pages, :destination_hash => { :action => 'results'} }  ) %>
<%= render( :partial => 'results/bulkcollect' ) %>
</div>
</td>
</tr></table>
</div>
